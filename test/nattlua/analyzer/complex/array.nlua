local type String = string

local META = {}
META.__index = META

function META:at(index: ref number)
    if index < 1 then
        index = #self.data - index
    end
    return self.data[index]
end

function META:concat(separator: ref nil | string)
    return table.concat(self.data, separator)
end

local function Array<|T: any, Size: number|>(init: nil | {[Size] = T})
    local self = {
        data = init || {} as {[Size] = T}
    }
    
    setmetatable(self, META)
    return self
end

local arr = Array<|string, 1..10|>({"hello", "world"})

attest.equal<|arr:at(-9), string|>
attest.equal<|arr:at(3), string|>

attest.expect_diagnostic<|"error", "not a subset of"|>
arr:at(-20)

attest.equal<|arr:concat(" "), string|>
